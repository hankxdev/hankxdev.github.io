<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Hank's Personal Blog</title>
    <description>Front-End Engineer, Runner, Web Extension developer.</description>
    <link>https://momane.com/</link>
    <atom:link href="https://momane.com/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>2022-09-17</pubDate>
    <lastBuildDate>Sat, 17 Sep 2022 16:03:11 +0200</lastBuildDate>
    <generator>Jekyll v3.9.0</generator>
    
      <item>
        <title>How to detect if an element is visible</title>
        <description>&lt;h1 id=&quot;javascript-how-to-detect-if-an-element-is-visible&quot;&gt;JavaScript: How to detect if an element is visible&lt;/h1&gt;

&lt;p&gt;There are many ways to detect if an element is visible on page. like&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-JavaScript&quot;&gt;element.style.display !== none &amp;amp;&amp;amp; element.visibility !== hidden
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;And what if you want to detect if an elemtn is in current viewport?&lt;/p&gt;

&lt;p&gt;Easy, right? You just need to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;getBoundingClientRect&lt;/code&gt;,  check if it’s top and bottom are all in viewport:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-JavaScript&quot;&gt;	const position = element.getBoundingClientRect();

	if(position.top &amp;gt;= 0 &amp;amp;&amp;amp; position.bottom &amp;lt;= window.innerHeight) {
		//it's in
	}

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Or, there is another way, with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;IntersectionObserver&lt;/code&gt; [https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API]. It can observe a target element and you can do something while the target elment enters or leaves viewport.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-JavaScript&quot;&gt;var observer = new IntersectionObserver(function(entries) {
	if(entries[0].isIntersecting === true)
		console.log('Element has just become visible in screen');
}, { threshold: [1] });

observer.observe(element);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Note that the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;threshold&lt;/code&gt;, it is a number between 0 and 1, that represents the viewable area of the target element in the screen. For example, 0 represents no area of element is visible. A value of 0.10 represents about 10% area is viewable in screen. Value of 1 means element is fully viewable in screen.
You can even specify multiple thresholds.&lt;/p&gt;

&lt;p&gt;Now think about another scenario, what if an element is visible, but it’s parent is not visible? like:&lt;/p&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;parent&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;style=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;disply: none&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;child&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;style=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;display: block&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    I'm not visible
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;document.querySelector('child').style.display === 'block'&lt;/code&gt;, you will get a &lt;strong&gt;true&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;How to fix this?&lt;/p&gt;

&lt;p&gt;Well we can use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;offsetParent&lt;/code&gt;. The HTMLElement.offsetParent read-only property returns a reference to the element which is the closest (nearest in the containment hierarchy) positioned ancestor element.&lt;/p&gt;

&lt;p&gt;so if &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;elment.offsetParent === null&lt;/code&gt;, then we can tell that the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;element&lt;/code&gt; is not visible.&lt;/p&gt;

</description>
        <pubDate>2022-09-17</pubDate>
        <link>https://momane.com/articles/2022-07/how-to-detect-if-an-element-is-visible</link>
        <guid isPermaLink="true">https://momane.com/articles/2022-07/how-to-detect-if-an-element-is-visible</guid>
        
        <category>JavaScript</category>
        
        <category>CSS</category>
        
        
        <category>programming</category>
        
      </item>
    
      <item>
        <title>Enable HTTPS on local, even with a customizable domain</title>
        <description>&lt;p&gt;Normally, when you’re debugging your web app on local, you can access it with either &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://localhost:PORT&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://127.0.0.1:POST&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;POST&lt;/code&gt; might be &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;8080&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;3000&lt;/code&gt; or what’s ever.&lt;/p&gt;

&lt;p&gt;But sometimes you might need to access your local web app with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https&lt;/code&gt;, like &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://localhost:8080&lt;/code&gt;. So you search online
with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;local https&lt;/code&gt;, tons of posts/tutorials teach you how to generate self-signed SSL certificate and assign to your localhost.&lt;/p&gt;

&lt;p&gt;As an app developer, you might feel it’s too complicated and don’t want to spend half an hour on it.&lt;/p&gt;

&lt;p&gt;So here I found the easiest way to achieve this with just one small tool and 1 line command, without changing anything in your actual app.&lt;/p&gt;

&lt;p&gt;This tool is (&lt;strong&gt;local-ssl-proxy&lt;/strong&gt;)[https://www.npmjs.com/package/local-ssl-proxy] , it is an open sourced npm package. so you can just install it by running&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;npm &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-g&lt;/span&gt; local-ssl-proxy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then you can just access your local web app with this command(let’s assume the app is running on 8080 port):&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;local-ssl-proxy -s 8081 -t 8080
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In this way, your web app’s url will be &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://localhost:8081&lt;/code&gt;. And you can still access your app from the original http url and port.&lt;/p&gt;

&lt;p&gt;The &lt;strong&gt;-s&lt;/strong&gt; is the port that the app will be proxies to, the &lt;strong&gt;8080&lt;/strong&gt; is the actual port your app running on.&lt;/p&gt;

&lt;h3 id=&quot;whats-more&quot;&gt;what’s more?&lt;/h3&gt;

&lt;p&gt;If you don’t like to use the localhost, or you have to assign as domain to your local app. you can simply make it with 2 more steps.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;add a line in your computer’s &lt;strong&gt;hosts&lt;/strong&gt; file.
    &lt;ul&gt;
      &lt;li&gt;if you are on Windows, the hosts file’s path is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;c:\windows\system32\drivers\etc\hosts&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;on Mac and Linux the path simply is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/hosts&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;you need Admin/root privilege to modify it&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;The line would be&lt;/p&gt;
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;127.0.0.1 YOUR_DOMAIN
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;YOUR_DOMAIN&lt;/code&gt; can be anything, you don’t even register the domain, because it only works on your computer.&lt;/p&gt;

    &lt;p&gt;But don’t use some famous one like youtube.com or google.com, some browser would block it.&lt;/p&gt;

    &lt;p&gt;Let’s say we use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hank.momane&lt;/code&gt; in below example.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Then run the proxy like this:
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;local-ssl-proxy &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; 443 &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; 8080 &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; hank.momane
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;So by using the SSL port &lt;strong&gt;443&lt;/strong&gt; and an extra parameter &lt;strong&gt;-n&lt;/strong&gt;, now you can access your
app via &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://hank.momane&lt;/code&gt;.&lt;/p&gt;

</description>
        <pubDate>2022-09-17</pubDate>
        <link>https://momane.com/2021-09-14-enable-https-and-domain-on-local</link>
        <guid isPermaLink="true">https://momane.com/2021-09-14-enable-https-and-domain-on-local</guid>
        
        <category>https</category>
        
        <category>web development</category>
        
        
        <category>programming</category>
        
        <category>tips</category>
        
      </item>
    
      <item>
        <title>Firefox offline installer official download page</title>
        <description>&lt;p&gt;Why do I need offline installer of Firefox?&lt;/p&gt;

&lt;p&gt;Because its online installer is too slow. (Yes the installer that you download from its index page is online 
installer, basically it’s just a downloader, that
when you run it, it just downloads the offline installer and install it for you. If you don’t feel it’s slow, 
then you don’t need to read this post.)
And maybe the online installer even uses P2P so when it will also upload to others while installing.&lt;/p&gt;

&lt;p&gt;So in this &lt;a href=&quot;https://www.mozilla.org/en-US/firefox/all/#product-desktop-release&quot;&gt;Firefox offline installer download page&lt;/a&gt;, 
you can pick any version for any OS to download
the Firefox, like Firefox Developer Edition, Firefox Beta, for Mac, for Windows, fore Linux and even for Android mobile.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../assets/firefox_offline_installer.png&quot; alt=&quot;img.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;And, here is also &lt;a href=&quot;http://www.chromium.org/getting-involved/dev-channel&quot;&gt;Chrome release channels&lt;/a&gt;, where you can 
download several chrome versions, like Chrome Dev version, Beta, and Canary, for different OS.&lt;/p&gt;

&lt;p&gt;Like me, I like running different profile in different versions of Chrome and Firefox, because their icon are different 
,easier than check the profile name in the top right corner.&lt;/p&gt;

</description>
        <pubDate>2022-09-17</pubDate>
        <link>https://momane.com/2021-08-25-firefox-offline-download-official-page</link>
        <guid isPermaLink="true">https://momane.com/2021-08-25-firefox-offline-download-official-page</guid>
        
        <category>firefox</category>
        
        
        <category>browser</category>
        
      </item>
    
      <item>
        <title>Do not store file outside of WSL, it is slow</title>
        <description>&lt;p&gt;For some reason, I have switch back to Windows OS after years of working on MacOS.&lt;/p&gt;

&lt;p&gt;Most of the time I’m working on frontend projects, so to get better DX, I use Windows Subsystem for Linux (WSL for short). 
And I’m using version 2 of it.&lt;/p&gt;

&lt;p&gt;But I’m not a fancy Vim programmer, I heavily relay on IDEs like  VS Code and WebStorm. So I still have to install these IDEs
on the Windows.&lt;/p&gt;

&lt;p&gt;I’m able to install zsh, oh-my-zsh, fuck, p10k along with other tools in the WSL, gives me a similar experience as on Mac.&lt;/p&gt;

&lt;p&gt;At the first I put the project on Windows file system, because in this way I can easily access the file from IDE. 
And then in the WSL2 terminal, I go to the Windows path like this:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; /mnt/DISK/PROJECT_FOLDER
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I can run all these frontend commands like &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;yarn&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nvm&lt;/code&gt;. Seems smooth.&lt;/p&gt;

&lt;p&gt;Soon I find a big issue. The hot module replacement not working, the building process is very slow. I have to restart the project 
dev command after making change to the code. Clearly this is not an acceptable solution.&lt;/p&gt;

&lt;p&gt;After searching a bit on the internet, I move the project back to WSL file system, then every thing works perfectly. The building is faster,
the HMR is working.&lt;/p&gt;

&lt;p&gt;To access the file in WSL from IDEs, VS Code has &lt;a href=&quot;https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl&quot;&gt;extension&lt;/a&gt; 
to open file from WSL easily, just install it, and in the terminal, just switch to the project folder and type &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;code .&lt;/code&gt;. Or in the IDE, click &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;File-Open Folder&lt;/code&gt;, 
it will show your linux home folder by default. For WebStorm, it will also show the WSL folder in the open file dialog.&lt;/p&gt;

&lt;p&gt;Finally, I can use my i7+32G Windows, don’t need to listen to the crazy fan noise on the MBP :D&lt;/p&gt;

</description>
        <pubDate>2022-09-17</pubDate>
        <link>https://momane.com/do-not-store-file-outside-of-wsl-file-system-its-slow</link>
        <guid isPermaLink="true">https://momane.com/do-not-store-file-outside-of-wsl-file-system-its-slow</guid>
        
        <category>wsl</category>
        
        
        <category>programming</category>
        
      </item>
    
      <item>
        <title>A wrong solution on Leetcode</title>
        <description>&lt;p&gt;With all these years as an engineer, I never tried Leetcode.&lt;/p&gt;

&lt;p&gt;Maybe it’s because I never prepared for interview before.&lt;/p&gt;

&lt;p&gt;Well, now I have to, because the company I just joined in 6 month ago, is gonna shutdown 
it’s office here.&lt;/p&gt;

&lt;p&gt;Technically not shutdown, it just lays off every programmer because it thinks we are more expensive than those in 
another country.&lt;/p&gt;

&lt;p&gt;So people all say you have to try Leetcode to practice your programming skill.&lt;/p&gt;

&lt;p&gt;As a frontend engineer, why should I try it? Most of the time, I’m building UI, calling API, fighting with webpack configuration, 
cursing Google Lighthouse always gives my webpage low score, 
arguing with designer why is same  font size seems so big on production than on Figma…&lt;/p&gt;

&lt;p&gt;After I tried to solve some problems on it, I found it is pretty fun, except it made me think myself not a qualified programmer.&lt;/p&gt;

&lt;p&gt;For the problem &lt;a href=&quot;https://leetcode.com/problems/palindrome-permutation/&quot;&gt;palindrome permutation&lt;/a&gt;. I found it’s top 1 solution is not correct.&lt;/p&gt;

&lt;p&gt;The code is like this:&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;canPermutePalindrome&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;arr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[...&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))];&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ceil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The code is very short and clean, pretty impressive at the first glance, and most of the cases it works,
Leetcode also thinks it’s a correct one.
But if you try with a string &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;aaaabbbbcc&lt;/code&gt;, it returns &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;false&lt;/code&gt;, while it should be &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;true&lt;/code&gt;. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ababccbaba&lt;/code&gt; clearly is a palindrome.
Clearly the test cases could not cover all the scenes
Here is my solution, a simple and basic one:&lt;/p&gt;
&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;canPermutePalindrome&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;has&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Basically it uses &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Set&lt;/code&gt;&lt;/a&gt; to store the
unique chars in the string, it should be at last only 1 char with odd amount.&lt;/p&gt;

&lt;p&gt;It uses 100ms to execute. Not a very good one, but at least it works :D&lt;/p&gt;
</description>
        <pubDate>2022-09-17</pubDate>
        <link>https://momane.com/a-wrong-solution-on-leetcode</link>
        <guid isPermaLink="true">https://momane.com/a-wrong-solution-on-leetcode</guid>
        
        <category>git</category>
        
        
        <category>programming</category>
        
      </item>
    
      <item>
        <title>how to skip git hooks when committing</title>
        <description>&lt;p&gt;Well,  it’s not very recommended skipping git hooks. These hooks are often for formatting code, running tests, etc.&lt;/p&gt;

&lt;p&gt;But life happens, sometimes you want to commit something quickly or even an empty commit to the server so that you can 
trigger some CI/CD, but you have to wait for 5 min for those tests running.&lt;/p&gt;

&lt;p&gt;So if you want to skip git hooks while commting, simply run command like this:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git commit &lt;span class=&quot;nt&quot;&gt;--no-verify&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;YOUR COMMIT MESSAGE&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or for short&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git commit &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;YOUR COMMIT MESSAGE&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;BTW, the command to push an empty commit is&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git commit &lt;span class=&quot;nt&quot;&gt;--allow-empty&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;YOUR COMMIT MESSAGE&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Just remember only use these commands when you are really urgent and confident about your change.&lt;/p&gt;
</description>
        <pubDate>2022-09-17</pubDate>
        <link>https://momane.com/how-to-skip-git-hooks-when-committing</link>
        <guid isPermaLink="true">https://momane.com/how-to-skip-git-hooks-when-committing</guid>
        
        <category>git</category>
        
        
        <category>programming</category>
        
      </item>
    
      <item>
        <title>How to fix: Enzyme expects an adapter to be configured</title>
        <description>&lt;p&gt;Working on updating a legacy React project. It’s still using React 8 and Node 7.9, I’d like to upgrate it
to the latest React and Node.&lt;/p&gt;

&lt;p&gt;The upgrading process was boring and straight forward, I just upgrade the dependencies and fix those broken changes in some
dependencies, luckily most of them do noe need any change.&lt;/p&gt;

&lt;h4 id=&quot;problem&quot;&gt;Problem&lt;/h4&gt;
&lt;p&gt;But when I run jest test, there is an error popup in almost every test file:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Enzyme Internal Error: Enzyme expects an adapter to be configured, but found none. To
configure an adapter, you should call `Enzyme.configure({ adapter: new Adapter() })` 
before using any of Enzyme's top level APIs, where `Adapter` is the adapter 
corresponding to the library currently being tested. For example:

          import Adapter from 'enzyme-adapter-react-16';
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Searched a bit, it looks like after Enzyme 3.0 and React15, you have to configure the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Adapter&lt;/code&gt; to run the tests.&lt;/p&gt;

&lt;h4 id=&quot;solution&quot;&gt;Solution&lt;/h4&gt;
&lt;p&gt;To fix it is very simple, just put these lines on the top of your test file:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import { configure } from 'enzyme';
import Adapter from 'enzyme-adapter-react-15';

configure({ adapter: new Adapter() });
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;enzyme-adapter-react-15&lt;/code&gt; is also needed, you will need to use correct version per your react version.&lt;/p&gt;

&lt;p&gt;But, what if your project is very large, it has like more than 30 test files, is it mean that you will need to 
put these line on top of every of your test file?&lt;/p&gt;

&lt;p&gt;Of course no, here is what you should do.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;create a js file, name it as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jestConfig.js&lt;/code&gt; or any name you think is best. put it in any path in your 
project.&lt;/li&gt;
  &lt;li&gt;either create a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jest.config.js&lt;/code&gt; in your project root or a block in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;package.json&lt;/code&gt; file&lt;/li&gt;
  &lt;li&gt;put/append these content into it:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &quot;jest&quot;: {
    // ... other jest configrations
    &quot;setupFilesAfterEnv&quot;: [&quot;&amp;lt;rootDir&amp;gt;/path/to/your/jestConfig.js&quot;],
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notice that some tutorial might suggest you to do this with old Enzyme version&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &quot;jest&quot;: {
    // ... other jest configrations
    &quot;setupTestFrameworkScriptFile&quot;: &quot;&amp;lt;rootDir&amp;gt;/path/to/your/jestConfig.js&quot;
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In newer version the key has been changed from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setupTestFrameworkScriptFile&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setupFilesAfterEnv&lt;/code&gt;, and 
you can use multiple config file since it now uses array as value.&lt;/p&gt;

&lt;h4 id=&quot;what-about-react-17&quot;&gt;what about React 17&lt;/h4&gt;

&lt;p&gt;While the most recent official &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ezyme-adapter-react&lt;/code&gt; is for 16, the 17 is not surpported yet, so if you 
are using React 17, here is another unofficial package you can use &lt;a href=&quot;https://www.npmjs.com/package/@wojtekmaj/enzyme-adapter-react-17&quot;&gt;@wojtekmaj/enzyme-adapter-react-17&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It has more than 6k downloads every week now, seems reliable.&lt;/p&gt;

</description>
        <pubDate>2022-09-17</pubDate>
        <link>https://momane.com/how-ro-fix-enzyme-expects-an-adapter-to-be-configured</link>
        <guid isPermaLink="true">https://momane.com/how-ro-fix-enzyme-expects-an-adapter-to-be-configured</guid>
        
        <category>react</category>
        
        <category>jest</category>
        
        
        <category>programming</category>
        
        <category>front-end</category>
        
      </item>
    
      <item>
        <title>为什么不要买罗技K380无线键盘</title>
        <description>&lt;p&gt;罗技K380无线键盘，被很多平台吹为几乎最佳的移动设备伴侣键盘，深受很多iPad乃至MacBook用户的欢迎。&lt;/p&gt;

&lt;p&gt;其优点有：蓝牙连接，最多可以连接三台设备，切换便捷。轻薄小巧，手感和笔记本键盘非常相似。而多色键帽更满足了不同审美用户的需求。&lt;/p&gt;

&lt;p&gt;因为有移动办公的需求，而Macbook的键盘手感实在太烂，所以前段时间我也买了一个，用了不多几次发现这是一个非常烂的键盘。&lt;/p&gt;

&lt;p&gt;手感差其实没有什么可以挑剔的，要做到轻薄小巧，必然牺牲键程和手感。&lt;/p&gt;

&lt;p&gt;但是其做工和用料却非常差，放在包里背了几次，就掉了一个键。不像其他键盘，键帽掉了以后按上去就可以了。K380的这个键帽我怎么装都装不上去。&lt;/p&gt;

&lt;p&gt;看了一下还在保修期内，就送回京东售后维修。&lt;/p&gt;

&lt;p&gt;然而京东最终给的答复是，键帽掉落属于外观损伤，不属于质量问题，拒绝保修。直接返回来了。&lt;/p&gt;

&lt;p&gt;返回后我一看，不但掉落的键没有装上去，旁边还多掉了一个键。仔细看了一下，之前掉落的键里面的卡件已经被按平，所以可以猜想是京东的售后人员先是尝试将按键按照传统方式按回去，暴力按了几下以后发现装不上，
然后又想拆旁边的键看一下结构怎么装。&lt;/p&gt;

&lt;p&gt;结果拆了以后没看出所以然来，新拆的这个键也装不回去了。就把键盘按键这种核心部件说成外观拒绝保修了。&lt;/p&gt;

&lt;p&gt;话说最近在另外一个网站看到有人的耳机罩在保修期内自动裂开，内部部件外露，送到京东也是以属于外观问题不予保修拒绝售后。&lt;/p&gt;

&lt;p&gt;不知道京东以相似的理由拒绝了多少保修。&lt;/p&gt;

&lt;p&gt;吐槽完京东，再仔细研究一下这个键盘，其剪刀脚结构是纯塑料，而且是非常脆弱的那种，稍微用点力就很容易变形乃至断掉，这个键就没用了。而键帽下面的连接件也是非常小而软的金属挂钩，很容易变形，当然也可以给掰回来，但是如果掰次数多了，就会断掉。&lt;/p&gt;

&lt;p&gt;也就是说，&lt;strong&gt;如果你的K380键帽掉了，千万不要像其他键盘那样，尝试用力将键帽按回去，不但装不回去，还有可能永久损伤键帽甚至键帽下面的连接件&lt;/strong&gt;，连接件一旦坏了，键盘就废了，除非你能接受键盘少一个键。&lt;/p&gt;

&lt;p&gt;如果损伤键帽，淘宝上有几家卖的，估计就是送修或者报废的k380拆了卖零件的。&lt;/p&gt;

&lt;p&gt;一个键帽是10块钱起，下面的剪刀脚也是10块，不包邮。卖一排键帽就能买一个新的K380。&lt;/p&gt;

&lt;p&gt;所以如果你的K380键帽坏了，不要去买键帽，上淘宝或者其他二手平台卖键帽，然后拿换来的钱买一把新的键盘。&lt;/p&gt;

&lt;p&gt;当然买新键盘千万别再买k380了。&lt;/p&gt;

</description>
        <pubDate>2022-09-17</pubDate>
        <link>https://momane.com/why-you-should-not-buy-logitech-k380-keyboard</link>
        <guid isPermaLink="true">https://momane.com/why-you-should-not-buy-logitech-k380-keyboard</guid>
        
        <category>hardware</category>
        
        <category>chinese</category>
        
        
        <category>life</category>
        
      </item>
    
      <item>
        <title>How to copy image and text to clipboard with JavaScript</title>
        <description>&lt;p&gt;I used to saw my colleague add a 30kb lib only to implement a copy function
that when the user clicks on a text, copy it to the clipboard.&lt;/p&gt;

&lt;p&gt;And I also saw someone still trying to use flash or Clipboard lib to do the same thing.&lt;/p&gt;

&lt;h4 id=&quot;here-is-how-to-copy-text-to-your-clipboard-with-javascript-with-just-several-lines-of-code-and-its-cross-browser&quot;&gt;Here is how to copy text to your clipboard with JavaScript with just several lines of code. And it’s cross-browser&lt;/h4&gt;
&lt;p&gt;and device. No need for any 3rd party lib.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;copyToClipboard&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
 &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ta&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;textarea&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;nx&quot;&gt;ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;c1&quot;&gt;//hide it&lt;/span&gt;
 &lt;span class=&quot;nx&quot;&gt;ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;padding&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;nx&quot;&gt;ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;border&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;none&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;nx&quot;&gt;ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;outline&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;none&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;nx&quot;&gt;ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;boxShadow&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;none&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;c1&quot;&gt;//select the text&lt;/span&gt;
 &lt;span class=&quot;nx&quot;&gt;ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;focus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
 &lt;span class=&quot;nx&quot;&gt;ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
 &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;execCommand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;removeChild&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;it’s very simple, you just append an invisible textarea to the page, set value as the text you want to copy,
and run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;document.execCommand('copy')&lt;/code&gt;. Then remove the textarea from the page.&lt;/p&gt;

&lt;h4 id=&quot;here-is-how-to-copy-the-image-to-your-clipboard-with-javascript&quot;&gt;here is how to copy the image to your clipboard with JavaScript&lt;/h4&gt;
&lt;p&gt;Note that this one only works on Chrome and Edge right now (2020-10)
https://caniuse.com/mdn-api_clipboarditem&lt;/p&gt;

&lt;p&gt;This requires you to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;canvas&lt;/code&gt; to port the image to blob first.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;imageToBlob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;imageURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;canvas&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ctx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;2d&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;crossOrigin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;src&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;imageURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;onload&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;naturalWidth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;naturalHeight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;ctx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;drawImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toBlob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;blob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// here the image is a blob&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;blob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;image/png&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.75&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Clipboard&lt;/code&gt; API to do the magic&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;copyImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;imageURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;blob&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;imageToBlob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;imageURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;item&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ClipboardItem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;image/png&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;blob&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;navigator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;clipboard&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Simple as that.&lt;/p&gt;
</description>
        <pubDate>2022-09-17</pubDate>
        <link>https://momane.com/how-to-copy-image-and-text-to-clipboard-with-javascript</link>
        <guid isPermaLink="true">https://momane.com/how-to-copy-image-and-text-to-clipboard-with-javascript</guid>
        
        <category>javascript</category>
        
        
        <category>programming</category>
        
      </item>
    
      <item>
        <title>如何在电脑上调试手机真机网页以及微信浏览器网页</title>
        <description>&lt;p&gt;遇到个需求需要调试在微信中打开的网页。之前没有做过，搜了一圈那个所谓的在微信对话框中打开debugx5.qq.com的方法已经过时无用， 打开就显示你所使用对内核非X5内核。至于TBStool更是在2017年就已经停止更新，打开就闪退，浪费时间安装。&lt;/p&gt;

&lt;p&gt;看来因为开发人员对QQ搞出来的X5内核怨声载道，所以微信不得不妥协，弃用了X5内核作为内置浏览器内核了。&lt;/p&gt;

&lt;p&gt;至于spy-debugger等工具，我嫌麻烦也没装。&lt;/p&gt;

&lt;p&gt;找半天找不到有用的方法，好在同样的问题在手机上的Chrome里面打开也存在，于是就想先在Chrome里调试，万一能一起修复了呢。&lt;/p&gt;

&lt;p&gt;没想到就发现了Chrome调试工具居然也可以调试微信浏览器里打开的页面。看起来微信内建浏览器也采用了Chromium内核了。&lt;/p&gt;

&lt;p&gt;以下步骤同时适用于在电脑上调试手机浏览器网页调试和微信内建浏览器网页， 目前只限Android系统。iPhone还没去看。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;打开手机的开发者模式，这个各个手机打开方式都差不多，通过多次点击版本号来开启。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;在开发者模式里面打开 USB 调试功能&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;把你要调试的网址发送到微信对话框里，然后点击打开&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将手机通过USB数据线连接到电脑&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;在电脑上打开Chrome浏览器&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;新建一个标签页，输入网址 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;chrome://inspect/#devices&lt;/code&gt;。以前你需要在 Chrome 的开发者工具里面通过点击多个菜单来打开，Chrome现在将这个页面独立出来了，体验更佳。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;这时候你的手机应该会收到 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;允许当前连接的设备访问手机数据&lt;/code&gt; 的通知，点击允许即可&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;在电脑端 Chrome 的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;chrome://inspect/#devices&lt;/code&gt; 里面就应该能看到你手机 Chrome 里面打开的页面了&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;同时如果你已经在微信内建浏览器里打开了网页，你应该也能看到一个名为 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;com.tencent.mm&lt;/code&gt; 的浏览器里面打开了一个页面。
&lt;img src=&quot;../img/chrome-mobile-debug-devices.png&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;点击网址下面的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;inspect&lt;/code&gt; 就可以打开调试页面，其拥有电脑端Chrome开发工具的几乎所有调试功能。
&lt;img src=&quot;../img/chrome-mobile-debug-website.png&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;不得不说发现这点还是挺惊喜的。&lt;/p&gt;

</description>
        <pubDate>2022-09-17</pubDate>
        <link>https://momane.com/debug-webpage-on-mobile-and-wechat-in-chrome</link>
        <guid isPermaLink="true">https://momane.com/debug-webpage-on-mobile-and-wechat-in-chrome</guid>
        
        <category>debugging</category>
        
        <category>mobile</category>
        
        
        <category>programming</category>
        
      </item>
    
  </channel>
</rss>
